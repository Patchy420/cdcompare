<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Admin – Add Games</title>
  <style>
    body {
      background: #0d1117;
      color: #fff;
      font-family: Arial, sans-serif;
      padding: 20px;
    }
    input, textarea, select, button {
      width: 100%;
      padding: 10px;
      margin: 8px 0;
      border-radius: 6px;
      border: none;
    }
    button {
      background: #238636;
      color: white;
      cursor: pointer;
      font-size: 18px;
    }
    button:hover {
      background: #2ea043;
    }
    .box {
      max-width: 450px;
      margin: auto;
      padding: 20px;
      background: #161b22;
      border-radius: 8px;
    }
  </style>
</head>

<body>

<div class="box">
  <h2>Admin Panel – Add Game</h2>

  <label>Title</label>
  <input id="title">

  <label>Slug (game-id)</label>
  <input id="slug">

  <label>Platform</label>
  <input id="platform">

  <label>Region</label>
  <input id="region">

  <label>Cover URL</label>
  <input id="cover">

  <label>Description</label>
  <textarea id="description"></textarea>

  <button onclick="addGame()">Add Game</button>

  <p id="result"></p>

  <hr>

  <h2>Add Offer</h2>

  <label>Game UUID (from above)</label>
  <input id="game_id">

  <label>Store</label>
  <input id="store">

  <label>Price</label>
  <input id="price">

  <label>Currency</label>
  <input id="currency">

  <label>Region</label>
  <input id="offer_region">

  <button onclick="addOffer()">Add Offer</button>

  <p id="offerResult"></p>
</div>

<script>
const SUPABASE_URL = "https://gzjdgjmyhpgnembbtwfp.supabase.co";
const SUPABASE_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imd6amRnam15aHBnbmV0YmJ0d2ZwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI5Nzk5MzAsImV4cCI6MjA3ODU1NTkzMH0.rBWIQ891Z_iaSCZCDQUQfytN8P9ss346OYffYwWcFd8";

async function addGame() {
  const data = {
    title: title.value,
    slug: slug.value,
    platform: platform.value,
    region: region.value,
    cover: cover.value,
    description: description.value
  };

  const res = await fetch(`${SUPABASE_URL}/rest/v1/games`, {
    method: "POST",
    headers: {
      apikey: SUPABASE_KEY,
      Authorization: `Bearer ${SUPABASE_KEY}`,
      "Content-Type": "application/json",
      Prefer: "return=representation"
    },
    body: JSON.stringify(data)
  });

  const json = await res.json();
  result.innerText = "Game added! UUID: " + JSON.stringify(json, null, 2);
}

async function addOffer() {
  const data = {
    game_id: game_id.value,
    store: store.value,
    price: price.value,
    currency: currency.value,
    region: offer_region.value
  };

  const res = await fetch(`${SUPABASE_URL}/rest/v1/offers`, {
    method: "POST",
    headers: {
      apikey: SUPABASE_KEY,
      Authorization: `Bearer ${SUPABASE_KEY}`,
      "Content-Type": "application/json",
      Prefer: "return=representation"
    },
    body: JSON.stringify(data)
  });

  const json = await res.json();
  offerResult.innerText = "Offer added: " + JSON.stringify(json, null, 2);
}
</script>

</body>
</html>
